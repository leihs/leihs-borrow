# source: http://localhost:3250/borrow/graphql
# timestamp: Tue Oct 22 2019 20:16:35 GMT+0200 (Central European Summer Time)

schema {
  query: QueryRoot
}

type Attachment {
  content_type: String!
  filename: String!
  id: UUID!
  size: Int!
  url: String!
}

type Availability {
  dates: [DayData]
}

type Category {
  children: [Category]
  id: UUID!
  images: [Image]

  """
  Includes only direct ones or all from self and the descendent sub-categories.
  """
  models(directOnly: Boolean, limit: Int, offset: Int, orderBy: [ModelsOrderByInput], searchTerm: String): [Model]

  """
  A name is either a label for the child-parent connection (if such exists) or the name of the category itself.
  """
  name: String!
}

type Contract {
  """
  A short, human-readable string to identify contracts instead of the much
  longer UUID. The format is optimized to be communicated verbally.
  """
  compactId: UUID!
  id: UUID!
  inventoryPool: InventoryPool!
  note: String
  purpose: String!
  state: String!
}

type CurrentUser {
  inventoryPools(orderBy: [InventoryPoolsOrderByInput]): [InventoryPool]
  user: User
}

type DayData {
  date: String!
  quantity: Int!
  visitsCount: Int!
}

type Image {
  content_type: String!
  filename: String!
  id: UUID!
  imageUrl: String!
  size: Int!
  thumbnails: [Thumbnail]
}

type InventoryPool {
  email: String!
  id: UUID!
  name: String!
}

enum InventoryPoolsOrderByAttributeEnum {
  ID
  NAME
}

input InventoryPoolsOrderByInput {
  attribute: InventoryPoolsOrderByAttributeEnum!
  direction: OrderByDirectionEnum!
}

type Model {
  attachments: [Attachment]
  availability: [ModelInventoryPoolAvailability]
  description: String
  id: UUID!
  images: [Image]
  manufacturer: String

  """A name consists of product name and its version."""
  name: String!
  properties: [Property]
  recommends: [Model]
}

type ModelEdge {
  cursor: String!
  node: Model!
}

type ModelInventoryPoolAvailability {
  dates: [DayData]
  inventoryPool: InventoryPool!
}

type ModelsConnection {
  edges: [ModelEdge]
  pageInfo: PageInfo!
  totalCount: Int!
}

enum ModelsOrderByAttributeEnum {
  ID
}

input ModelsOrderByInput {
  attribute: ModelsOrderByAttributeEnum!
  direction: OrderByDirectionEnum!
}

enum OrderByDirectionEnum {
  ASC
  DESC
}

type PageInfo {
  endCursor: String
  hasNextPage: Boolean!
}

type Property {
  id: UUID!
  key: String!
  value: String!
}

"""Root of all queries."""
type QueryRoot {
  availability(endDate: String!, inventoryPoolId: UUID!, modelId: UUID!, startDate: String!): Availability
  categories(ids: [UUID], limit: Int, offset: Int, rootOnly: Boolean): [Category]
  currentUser: CurrentUser!
  inventoryPools: [InventoryPool]
  models(categoryIds: [UUID], endDate: String, inventoryPoolIds: [UUID], limit: Int, offset: Int, orderBy: [ModelsOrderByInput], searchTerm: String, startDate: String): [Model]
  modelsConnection(after: String, categoryIds: [UUID], endDate: String, first: Int, inventoryPoolIds: [UUID], orderBy: [ModelsOrderByInput], searchTerm: String, startDate: String): ModelsConnection
  users(limit: Int, offset: Int, orderBy: [UsersOrderByInput], searchTerm: String): [User]
}

type Thumbnail {
  content_type: String!
  filename: String!
  id: UUID!
  imageUrl: String!
  size: Int!
}

"""
A `User` represents a human agent that can log into and use the system.
"""
type User {
  contracts: [Contract]
  email: String
  firstname: String
  id: UUID!
  lastname: String
  login: String
}

enum UsersOrderByAttributeEnum {
  ID
}

input UsersOrderByInput {
  attribute: UsersOrderByAttributeEnum!
  direction: OrderByDirectionEnum!
}

scalar UUID
