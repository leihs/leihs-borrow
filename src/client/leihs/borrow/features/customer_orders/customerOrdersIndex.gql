query myRentals($userId: UUID) {
  openRentals: rentals(
    userId: $userId
    rentalState: OPEN
    orderBy: [{ attribute: CREATED_AT, direction: DESC }]
  ) {
    ...rentalConProps
  }
  closedRentals: rentals(
    userId: $userId
    rentalState: CLOSED
    orderBy: [{ attribute: CREATED_AT, direction: DESC }]
  ) {
    ...rentalConProps
  }
}

fragment rentalConProps on RentalsConnection {
  edges {
    node {
      ...rentalProps
    }
  }
}

fragment rentalProps on Rental {
  id
  borrowUrl

  isCustomerOrder
  state: rentalState
  fulfillmentStates: refinedRentalState

  title
  purpose

  fromDate
  untilDate

  totalDays
  totalQuantity

  pickupFulfillment {
    fulfilledQuantity
    toFulfillQuantity
  }

  returnFulfillment {
    fulfilledQuantity
    toFulfillQuantity
  }

  createdAt
  updatedAt

  # reservations {
  #   id
  #   status
  #   quantity
  #   inventoryPool {
  #     id
  #     name
  #   }
  # }
  # subOrdersByPool {
  #   id
  #   state
  # }
}
